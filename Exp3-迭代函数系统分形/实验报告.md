# 迭代函数系统(IFS)分形实验报告

## 实验目的

1. 理解迭代函数系统(IFS)的基本原理和算法
2. 掌握"混沌游戏"随机迭代方法
3. 实现巴恩斯利蕨和概率树的生成
4. 分析不同参数对分形图形的影响

## 实验过程

### 1. 核心算法实现

**IFS参数定义**:
- 巴恩斯利蕨: 4个仿射变换(茎干、小叶片、左右大叶片)
- 概率树: 3个仿射变换(树干、左右分支)

**混沌游戏算法**:
1. 初始化起始点
2. 随机选择变换(按概率)
3. 应用仿射变换生成新点
4. 重复迭代生成点集

### 2. 分形实现

**巴恩斯利蕨参数**:
- 茎干变换: 概率0.01
- 小叶片变换: 概率0.85
- 左右大叶片变换: 各概率0.07

**概率树参数**:
- 树干变换: 概率0.10
- 左右分支变换: 各概率0.45

### 3. 遇到的问题与解决

(请在此描述实现过程中遇到的问题及解决方法)
不理解为什么要删除初始100个点：初始点可能随机落在分形图案的稀疏区域，导致图像出现孤立的离群点。删除初始点后，生成的点集更密集、更均匀地分布在分形结构上，图像更美观。

## 结果展示

### 1. 巴恩斯利蕨
[插入生成的巴恩斯利蕨分形图]
- 展示不同变换对应的叶片部分
- 分析概率参数对叶片密度的影响
![屏幕截图 2025-04-23 121442](https://github.com/user-attachments/assets/8512bd34-ba3f-4c57-996e-545edf604a13)

### 2. 概率树 
[插入生成的概率树分形图]
- 展示分支结构
- 分析变换参数对树形的影响
![屏幕截图 2025-04-23 121510](https://github.com/user-attachments/assets/e37f720c-15af-4426-afa4-a1c2575dac68)

## 分析与思考

1. **IFS特性分析**
   - 仿射变换参数对图形各部分的影响：仿射参数：控制分形的几何形状（缩放、旋转、平移、剪切），决定各部分的形态。
   - 概率参数与图形密度的关系：概率参数：控制分形各部分的点密度，概率越高，对应区域越密集。

2. **参数实验**
   - 修改概率参数的效果
   - 调整变换参数的效果
![屏幕截图 2025-04-23 215159](https://github.com/user-attachments/assets/9c622de3-bf30-4fe6-b6fc-c3fd256e74cf)
![屏幕截图 2025-04-23 215202](https://github.com/user-attachments/assets/6a7bca87-9642-4380-8070-c469fd076216)
![屏幕截图 2025-04-23 215207](https://github.com/user-attachments/assets/31f878cd-4442-4117-aa1c-10100e404900)
![屏幕截图 2025-04-23 215211](https://github.com/user-attachments/assets/639b4dde-f7fc-4b79-938b-c78b66a874f5)

3. **扩展思考**
   - 如何设计新的IFS规则生成其他分形步骤1：确定分形的基本形状
根据目标分形（如树木、雪花、山脉等），分析其几何特征（对称性、分支方式、缩放比例等）。

步骤2：分解为仿射变换
将分形分解为多个子部分，每个子部分对应一个仿射变换。例如：

对称分形（如科赫雪花）：使用相同参数的多个旋转/镜像变换。

自然分形（如树木）：使用不同缩放和旋转的分支变换。

步骤3：调整参数和概率
通过实验调整参数和概率，确保分形收敛到期望的形状。
   - 添加颜色渐变效果的方法：为每个仿射变换分配固定颜色，根据选择的变换索引染色。/根据点的坐标 (x, y) 计算颜色（如高度映射到颜色）/记录每个点的迭代次数（深度），越深的点颜色越暗。
   - 性能优化方案(减少点数同时保持视觉效果)：对稀疏区域（如分形边缘）的变换增加概率权重，确保关键区域密度足够。

4. **算法比较**
   - IFS与其他分形生成方法的对比：相比较分形几何学，IFS与集合论关系更为密切。
迭代函数系统下的分形，正如其名，可存在于各种维度的空间中，但是一般常见于二维平面。IFS分形由数个自身的复制合并组成，每个复制皆遵循一个方程进行变换（因此称之为“函数系统”）
   - 随机迭代与确定性迭代的差异：分形上随机迭代和确定性迭代的主要区别在于生成过程的方式和结果的表现：
1. 确定性迭代

1.生成规则固定：确定性迭代中，每次迭代的过程都是由一个固定的数学规则或公式决定的。每一次的计算都产生一个完全确定的结果。
2.轨迹可预测：由于规则是确定的，因此你可以准确预测迭代的每一步，且相同的初始条件每次都会产生相同的结果。
3.分形特性：确定性迭代生成的分形通常是对称的、规律的，并且可以精确重现。经典的例子包括 曼德尔布罗集（Mandelbrot Set） 和 朱利亚集（Julia Set）。

2. 随机迭代

4.生成规则随机：在随机迭代中，每一次迭代的过程受随机因素的影响。即使初始条件相同，之后的迭代过程也会由于随机性的不同而产生不同的结果。
5.轨迹不可预测：由于规则或参数是随机的，未来的迭代结果无法精确预测，这种不确定性是随机迭代的核心特征。
6.分形特性：随机迭代生成的分形通常具有更复杂、不可预测的结构，具有更强的随机性和不规则性。例如， 随机分形，如 柏林噪声 ，它们在生成过程中会引入随机因素，从而产生更自然、复杂的形态。

比较总结

7.确定性迭代会在每次迭代中使用相同的计算规则，因此它产生的分形结构具有高度的自相似性和规则性。
8.随机迭代则通过引入随机性，使得生成的分形结构更加不规则和多变，不容易预测，通常用来模拟自然界中的某些现象，如云朵、山脉等自然景观的生成。

两者的主要区别就在于是否引入了随机性：确定性迭代的结果完全由初始条件和迭代规则决定，而随机迭代则加入了不可预测的元素，使得每次迭代都可能产生不同的结果。

**注：请在每一部分补充你自己的实验内容、图像、分析和关键代码。**
